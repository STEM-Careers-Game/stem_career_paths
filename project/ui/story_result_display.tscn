[gd_scene load_steps=2 format=3 uid="uid://scprtnkdg4ka"]

[sub_resource type="GDScript" id="GDScript_wubyv"]
script/source = "extends VBoxContainer

signal dismissed

var result : StoryResult
var world : World

@onready var _story_label := $Story
@onready var _effects_box := %EffectsBox


func _ready():
	assert(result!=null, \"result must be specified\")
	assert(world!=null, \"world must be specified\")
	_story_label.text = result.get_text(world)
	
	var effects := result.get_effects()
	for attribute in effects.keys():
		var modifier = effects[attribute]
		var label := Label.new()
		label.text = \"%s %+d\" % [attribute.to_pascal_case(), modifier]
		_effects_box.add_child(label)


func _on_ok_button_pressed():
	dismissed.emit()
"

[node name="StoryResultDisplay" type="VBoxContainer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_wubyv")

[node name="Story" type="Label" parent="."]
layout_mode = 2
size_flags_vertical = 3
autowrap_mode = 2

[node name="EffectsBox" type="VBoxContainer" parent="."]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3

[node name="OkButton" type="Button" parent="."]
layout_mode = 2
text = "OK"

[connection signal="pressed" from="OkButton" to="." method="_on_ok_button_pressed"]
